# Audio Switcher
A Cities: Skylines II mod that lets you swap siren, vehicle engine, and ambient audio with custom `.wav` and `.ogg` files.

## Local Audio
Local audio replacement can be done from:
- `Custom Sirens` - For sirens.
- `Custom Engines` - For engine sounds.
- `Custom Ambient` - For other ambient sounds.

## Module Packs
Audio Switcher supports module packs delivered as separate mods via PDX.

A module pack is discovered when its mod root contains `AudioSwitcherModule.json`.

### Module Manifest
`AudioSwitcherModule.json` will be auto generated by the module generator.

The file will look like this:

```json
{
  "schemaVersion": 1,
  "moduleId": "example.audio.pack",
  "displayName": "Example Audio Pack",
  "sirens": [
    {
      "key": "police/na/wail",
      "displayName": "Police Wail NA",
      "file": "Audio/Sirens/police_na_wail.wav",
      "profile": {
        "Volume": 1.0,
        "Pitch": 1.0,
        "SpatialBlend": 1.0,
        "Doppler": 1.0,
        "Spread": 0.0,
        "MinDistance": 1.0,
        "MaxDistance": 200.0,
        "Loop": true,
        "RolloffMode": 1,
        "FadeInSeconds": 0.0,
        "FadeOutSeconds": 0.0,
        "RandomStartTime": false
      }
    }
  ],
  "vehicleEngines": [
    {
      "key": "cars/sport_a",
      "displayName": "Sport Engine A",
      "file": "Audio/Engines/sport_a.ogg"
    }
  ],
  "ambient": [
    {
      "key": "city/night_loop",
      "displayName": "City Night Loop",
      "file": "Audio/Ambient/city_night_loop.ogg"
    }
  ]
}
```

Notes:
- `file` is relative to the module mod root directory.
- `profile` is optional but highly recommended. If omitted, Audio Switcher uses a predefind template depending on the audio type you're creating.
- Entries appear in the dropdowns with `[Module: <displayName>]` labels.

## Creating and Uploading a Module to PDX Mods

1. Generate your module content.
   - Use the Developer tab module builder to export selected local audio into a standalone module folder.
   - The export includes:
     - `AudioSwitcherModule.json`
     - `Audio/Sirens/...`
     - `Audio/Engines/...`
     - `Audio/Ambient/...`

2. Wrap the module in a publishable CS2 mod project.
   - Create a project from the CS2 template
   - Copy your module files into that project.
   - Ensure manifest/audio files are copied to output by adding:

```xml
<ItemGroup>
  <Content Include="AudioSwitcherModule.json" CopyToOutputDirectory="PreserveNewest" />
  <Content Include="Audio\**\*.*" CopyToOutputDirectory="PreserveNewest" />
</ItemGroup>
```

3. Fill `Properties/PublishConfiguration.xml`.
   - Set display name, descriptions, thumbnail, version, changelog, tags, and access level.
   - For first publish, keep `ModId` empty.
   - After first publish, keep the assigned `ModId` for future uploads.

4. Publish.

5. Validate after upload.
   - Check your PDX Mods listing metadata and media.
   - Subscribe and test in-game to confirm Audio Switcher discovers the module.